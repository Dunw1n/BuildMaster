!function(){const t=document.createElement("link").relList;if(!(t&&t.supports&&t.supports("modulepreload"))){for(const t of document.querySelectorAll('link[rel="modulepreload"]'))e(t);new MutationObserver(t=>{for(const s of t)if("childList"===s.type)for(const t of s.addedNodes)"LINK"===t.tagName&&"modulepreload"===t.rel&&e(t)}).observe(document,{childList:!0,subtree:!0})}function e(t){if(t.ep)return;t.ep=!0;const e=function(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),"use-credentials"===t.crossOrigin?e.credentials="include":"anonymous"===t.crossOrigin?e.credentials="omit":e.credentials="same-origin",e}(t);fetch(t.href,e)}}();class t{constructor(t=".product-gallery"){this.container=document.querySelector(t),this.mainImage=null,this.thumbItems=[],this.init()}init(){this.container&&(this.mainImage=this.container.querySelector("#mainImage"),this.thumbItems=this.container.querySelectorAll(".thumb-item"),this.mainImage&&0!==this.thumbItems.length&&(this.addEventListeners(),this.addStyles()))}addEventListeners(){this.thumbItems.forEach(t=>{t.addEventListener("click",e=>this.switchImage(e,t)),t.setAttribute("tabindex","0"),t.addEventListener("keydown",e=>this.handleKeyDown(e,t))})}switchImage(t,e){e.classList.contains("active")||(this.mainImage.style.opacity="0",setTimeout(()=>{this.thumbItems.forEach(t=>{t.classList.remove("active")}),e.classList.add("active");const t=e.getAttribute("data-image");if(t){this.mainImage.src=t;const s=e.querySelector("img");s&&(this.mainImage.alt=s.alt)}this.mainImage.style.opacity="1"},200))}handleKeyDown(t,e){"Enter"!==t.key&&" "!==t.key||(t.preventDefault(),this.switchImage(t,e)),"ArrowRight"!==t.key&&"ArrowLeft"!==t.key||(t.preventDefault(),this.navigateWithArrows(t.key,e))}navigateWithArrows(t,e){const s=Array.from(this.thumbItems).indexOf(e);let i;"ArrowRight"===t?i=(s+1)%this.thumbItems.length:"ArrowLeft"===t&&(i=(s-1+this.thumbItems.length)%this.thumbItems.length);const n=this.thumbItems[i];n.focus(),this.switchImage(null,n)}addStyles(){if(!document.querySelector("#tab-switcher-styles")){const t=document.createElement("style");t.id="tab-switcher-styles",t.textContent="\n                .thumb-item {\n                    cursor: pointer;\n                    border: 2px solid transparent;\n                    border-radius: 4px;\n                    overflow: hidden;\n                    transition: all 0.3s ease;\n                }\n                \n                .thumb-item:hover {\n                    border-color: #ccc;\n                    transform: translateY(-2px);\n                }\n                \n                .thumb-item.active {\n                    border-color: #007bff;\n                }\n                \n                .thumb-item:focus {\n                    outline: 2px solid #007bff;\n                    outline-offset: 2px;\n                }\n                \n                #mainImage {\n                    transition: opacity 0.3s ease;\n                }\n            ",document.head.appendChild(t)}}switchToIndex(t){if(t>=0&&t<this.thumbItems.length){const e=this.thumbItems[t];this.switchImage(null,e)}}getActiveIndex(){return Array.from(this.thumbItems).findIndex(t=>t.classList.contains("active"))}destroy(){this.thumbItems.forEach(t=>{const e=t.cloneNode(!0);t.parentNode.replaceChild(e,t)});const t=document.querySelector("#tab-switcher-styles");t&&t.remove()}}class e{constructor(){this.init()}init(){this.initMobileMenu(),this.initTabs(),this.initSlider(),this.initForms(),this.initSmoothScroll(),this.initAnimations(),this.bindEvents(),this.initModal()}initMobileMenu(){const t=document.getElementById("mobileMenuBtn"),e=document.querySelector(".nav"),s=document.querySelector(".nav-overlay");t&&e&&s&&(t.addEventListener("click",()=>{const i="true"===t.getAttribute("aria-expanded");t.setAttribute("aria-expanded",!i),e.classList.toggle("active"),s.classList.toggle("active"),document.body.classList.toggle("menu-open")}),s.addEventListener("click",()=>{t.setAttribute("aria-expanded","false"),e.classList.remove("active"),s.classList.remove("active"),document.body.classList.remove("menu-open")}),document.querySelectorAll(".nav-link").forEach(i=>{i.addEventListener("click",()=>{e.classList.contains("active")&&(t.setAttribute("aria-expanded","false"),e.classList.remove("active"),s.classList.remove("active"),document.body.classList.remove("menu-open"))})}),window.addEventListener("resize",()=>{window.innerWidth>767&&e.classList.contains("active")&&(t.setAttribute("aria-expanded","false"),e.classList.remove("active"),s.classList.remove("active"),document.body.classList.remove("menu-open"))}))}initTabs(){const t=document.querySelectorAll(".tab-btn"),e=document.querySelectorAll(".tab-content");t.forEach(s=>{s.addEventListener("click",()=>{const i=s.dataset.tab;t.forEach(t=>t.classList.remove("active")),e.forEach(t=>t.classList.remove("active")),s.classList.add("active"),document.getElementById(i).classList.add("active")})})}initSlider(){"undefined"!=typeof Swiper&&document.querySelector(".swiper")&&(this.swiper=new Swiper(".swiper",{loop:!0,speed:800,autoplay:{delay:5e3,disableOnInteraction:!1},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},effect:"slide",grabCursor:!0,on:{init:function(){const t=this.slides[this.activeIndex];if(t){const e=t.querySelector(".slide-content");e&&(e.style.opacity="1",e.style.transform="translateY(0)")}},slideChangeTransitionStart:function(){this.slides.forEach(t=>{const e=t.querySelector(".slide-content");e&&(e.style.opacity="0",e.style.transform="translateY(20px)")})},slideChangeTransitionEnd:function(){const t=this.slides[this.activeIndex];if(t){const e=t.querySelector(".slide-content");e&&(e.style.opacity="1",e.style.transform="translateY(0)")}}}}))}initForms(){const t=document.getElementById("subscribeForm");t&&t.addEventListener("submit",e=>{e.preventDefault();const s=t.querySelector(".newsletter-input"),i=s.value;if(!i||!this.validateEmail(i))return void this.showNotification("Пожалуйста, введите корректный email","error");s.value="";const n=t.querySelector("button"),o=n.innerHTML;n.innerHTML='<i class="fas fa-check"></i> Успешно!',n.style.background="var(--success)",setTimeout(()=>{n.innerHTML=o,n.style.background=""},2e3),this.showNotification(`Спасибо за подписку! На адрес ${i} отправлено письмо с подтверждением.`,"success")})}initModal(){try{this.modal=new CallModal}catch(t){}}validateEmail(t){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)}initSmoothScroll(){document.querySelectorAll('a[href^="#"]').forEach(t=>{t.addEventListener("click",e=>{e.preventDefault();const s=t.getAttribute("href");if("#"===s)return;const i=document.querySelector(s);if(i){const t=document.getElementById("mobileMenuBtn"),e=document.querySelector(".nav"),s=document.querySelector(".nav-overlay");e&&e.classList.contains("active")&&(t.setAttribute("aria-expanded","false"),e.classList.remove("active"),s.classList.remove("active"),document.body.classList.remove("menu-open"));const n=document.getElementById("header")?.offsetHeight||80;window.scrollTo({top:i.offsetTop-n,behavior:"smooth"})}})})}initAnimations(){if("IntersectionObserver"in window){const t=new IntersectionObserver(t=>{t.forEach(t=>{t.isIntersecting&&(t.target.style.opacity="1",t.target.style.transform="translateY(0)")})},{threshold:.1,rootMargin:"0px 0px -50px 0px"});document.querySelectorAll(".category-card, .tab-item, .product-card").forEach(e=>{e.style.opacity="0",e.style.transform="translateY(20px)",e.style.transition="opacity 0.6s ease, transform 0.6s ease",t.observe(e)})}}bindEvents(){document.addEventListener("click",t=>{const e=t.target.closest(".view-details");if(e){const t=e.closest(".product-card"),s=t?.querySelector(".product-title")?.textContent||"Товар";this.showNotification(`Страница товара "${s}" в разработке`)}t.target.closest(".category-link")&&(t.preventDefault(),this.showNotification("Категория товаров в разработке"));const s=t.target.closest(".hero-buttons .btn");s&&"#contact"===s.getAttribute("href")&&(t.preventDefault(),this.showNotification("Наш менеджер свяжется с вами для консультации"))})}showNotification(t,e="info"){const s=document.querySelector(".notification-toast");s&&s.remove();const i=document.createElement("div");i.className="notification-toast",i.textContent=t,i.setAttribute("role","alert"),i.setAttribute("aria-live","assertive"),i.style.background="success"===e?"var(--success)":"error"===e?"#ef4444":"var(--primary)",i.style.cssText+="\n            position: fixed;\n            bottom: 20px;\n            right: 20px;\n            color: white;\n            padding: 16px 24px;\n            border-radius: var(--radius-md);\n            box-shadow: var(--shadow-xl);\n            z-index: 10000;\n            max-width: 350px;\n            opacity: 0;\n            transform: translateX(100%);\n            transition: opacity 0.3s ease, transform 0.3s ease;\n        ",document.body.appendChild(i),requestAnimationFrame(()=>{i.style.opacity="1",i.style.transform="translateX(0)"}),setTimeout(()=>{i.style.opacity="0",i.style.transform="translateX(100%)",setTimeout(()=>{i.parentNode&&i.parentNode.removeChild(i)},300)},3e3),i.addEventListener("click",()=>{i.style.opacity="0",i.style.transform="translateX(100%)",setTimeout(()=>{i.parentNode&&i.parentNode.removeChild(i)},300)})}}document.addEventListener("DOMContentLoaded",()=>{new e,new t(".product-gallery")});
